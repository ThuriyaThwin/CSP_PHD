<html>
  <head>
  <title>Rational Metareasoning in Problem-Solving Search</title>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  </head>
  <body style="direction: rtl; font: 14pt sans-serif; margin: 1em 2em">
  <h1>הסק־על רציונלי בבעיות חיפוש</h1>
  <h2>הנושא </h2>
  <p>
  בחמש השנים האחרונות עסקתי, בהנחיית פרופ שמעוני, בחקר Rational Metareasoning בבעיות חיפוש קשות. אני מאמין שקידמנו את התחום, שהיה קצת תקוע מאז תחילת שנות תשעים, והיום גם אציג את החידושים המטודולוגיים, גם אדגים אותם על שלוש בעיות מסוגים שונים. אבל קודם כל, אני מרגיש צורך להבהיר את משמעות הכותרת של התיזה שלי:
  </p>
  <blockquote>Rational Metareasoning in Problem-solving Search</blockquote>
  <p>
בכותרת זו כל מלה דורשת פירוש. אתחיל מהסוף: קודם כל, <b>Problem Solving Search</b> - ובעברית הייתי אומר: בעיות חיפוש קשות. בלב של אלגוריתמים רבים מוטמה חיפוש ממרחב מצבים בדיד ־ חיפוש קומבינטורי. אמנם יש בעיות שבהן זמן המאמץ הנדרש כדי למצוא את הפתרון תלוי בעיקר בממדים פשוטים של מופע הבעייה, כמו מספר קודקודים וצלעות בגרף בבעיית המסלול הקצר ביותר. אולם בבעיות רבות זמן מציאת הפתרון משתנה באופן חד ממופע למופע ־ וקושי יחסי של מציאת פתרון  עבור מופעים שונים תלוי גם 
באלגוריתם חיפוש שבחנרו בו. אנחנו מתרכזים בבעיות מסוג זה, שהן בדרך כלל גם בעיות קשות.
  </p>
  <p>
בבעיות חיפוש קשות ובלתי־הדוקות מועיל שימוש בהיוריסטיקות ־ חישובים שבשלב חיפוש נתון מאשפרים לאמוד מצבי החיפוש בסביבת המצב הנוכחי ובכך עוזרים לכוון את האלגוריתם. ככל שהיוריסטיקה מסוימת מקטינה את המאמץ למציאת הפתרון עבור קבוצת מופעים מסוימת, כך היא טובה יותר. גם כדי לחשב את ההיוריסטיקה נדרש זמן, לכן אפשר לאפיין היוריסטיקות בשלוש התכונות הבאות:
</p>
<ul>
 <li>יעילות: עד כמה היוריסטיקה משפרת ביצועים של האלגוריתם?</li>
 <li>סיבוכיות: כמה זמן לוקח לחשב את היוריסטיקה? (הרי  מציאת פתרון מדויק היא יוריסטיקה טובה ביותר, אבל  זמן החישוב יהיה ארוך מדי ־־־ זאת הסיבה שאנחנו מחפשים יוריסטיקות פשוטות יותר.</li>
 <li>כלליוּת ־־־ האם היוריסטיקה עובדת טוב במקרים שונים רבים, או שמיועדת רק לסוג מופעים  מסוים?  </li>
</ul>
מאפיינים אלה מציבים שאלות רבות ומסקרנות לגבי אלגוריתמים היוריסטיים לבעיות חיפוש קשות.
</p>

<p><b>Rationality</b>
־ מקור המונח ־ בבינה מלאכותית, במודל שבה סוכנים חישוביים פועלים בעולם לצורך השגת מטרה מסוימת, כשיש לסוכנים רק ידע חלקי על הסביבה. וסוכן רציונלי עשוי לפועל באופן שממקסם את התוכלת התועלת שלו. רציונלית מוחלטת איננה בת השגה כי המשאבים החישוביים של הסוכן עצמו מוגבלים, ושואפים לפתח סוכנים בעלי אופטימליות מסויגת, ־ פועלים כדי למקסם את תוכלת התועלת שלהם בהתחשב גם במשאבים החישוביים של עצמם. 
</p>
<p>
בסוג האחרון של רציונליות, המכונה ״רציונליות מוגבלת״ אנחנו מתעניינים כשמתבוננים בשימוש נבון בהיוריסטיקות ־ כיצד לאזן  בין התועלת שניתן להשיג מחישוב היוריסטי לבין המחיר שאנחנו משלמים עבורו. 
תשובה לשאלה זו דורשת יותר מניתוח סיבוכיות יחסית של אלגוריתם החיופש והחישוב היוריסטי, כי, כפי שהזכרנו קודם, אנחנו מתעניינים באלגוריתמים לבעיות שבהן זמן מציאת פתרון משתנה משמעותית ממופע למופע ותלוי בתוצאות של החישובים היוריסטיים. 
</p>
<p>
גם במרכז הכותרת, גם במרכז המחקר נמצא <b>Metareasoning</b>, מונח שאפשר לתרגם אותו כ״הסק על הסק״. אלגוריתם חיפוש בכל שלב מקבל החלטה מה תהיה הפעולה הבאה ־ איזה מצב לפתח, איזה איבר להוסיף לקבוצה וכו. את ההחלטה הזו הוא מקבל, כפי שנזכרנו קודם, בעזרת חישובי עזר ־ היוריסטיקות. במקרים רבים קיימת אפשרות לבחור בהיוריסטיקה מסוימת מתוך כמה, להפעיל חישוב היוריסטי בעל אופי ארקאי מספר פעמים, או, לחליפין, להתקדם בלי לבצע חישובים נוספים, על סמך הידע שכבר נצבר עד כה. כל אחת מהאפשרויות הללו, אם בוחרים בה נכונה, עשויה ליעל את האלגוריתם, לשפר את זמן הריצה שלו, או, באופן כללי  יותר ־ להוריד את המחיר שאנו עומדים לשלם על מציאת הפתרון. Metareasoning כתחום מחקר עוסק בשיטות מסודרות לקבלת החלטות אלה. 
</p>
<h2>תכנית ההרצאה</h2>
<p>
בהמשך ההרצאה אני אתאר, על רגל אחת, את התאוריה והמטודולגיה הבסיסית של Rational Metareasoning, שאותה אנחנו מנסים ליישם בתחומים שונים. אחר כך אנחנו נתבונן בשלוש גוסיות של שימוש בRational Metareasoning באלגוריתמים היוריסטיים:
</p>
<ul>
  <li>סיפוק אילוצים</li>
  <li>דגימת מונטה־קרלו בעצים (Monte Carlo Tree Search)</li>
  <li>אלגוריתם A*</li>
</ul>
<p>
בכל אחת מהסוגיות אני אדבר על הגדרת הבעייה במונחים של Rational Metareasoning, על הקשיים בפעלה ישירה של השיטה, ועל הדרכים שבהן התגברנו על הקשיים וקיבלנו פתרון מוצלח.   לסיכום, אומר כמה הערות על הארות מטודולוגיות כלליות, שיהיו מן הסתם חשובות גם בסוגיות נוספות בעתיד.
</p>

  <h2>Rational Metareasoning</h2>
  
  <p>
שני מושגי יסוד של Rational Metareasoning הם  ערך מידע (Value of Information) ועלות הזמן (time cost). בכל שלב האלוגירתם מהרהר לפני שבוחר בפעולה  בסיסית זו או אחרת שמקדמת אותו במרחב החיפוש. הפעולה טובה ביותר היא זאת שממקסמת את תוכלת התועלת של הפתרון העתידי, בהנתן הידע הנוכחי על הבעייה. ההירהור מתממש תוך ביצוע של פעולות חישוביות  שמטרתן לשפר את הידע של האלגוריתם על הבעייה כך שיוכל לבחור פעולה בסיסית טובה יותר, כלומר, שתוביל לפתרון עם תועלת גבוה יותר בתוכלת. תוכלת השיפור של התוכלת התועלת של הפעולה הבסיסית שתיבחר היא ערך מידע של פעולה חישובית. בכל רגע נתון, אנחנו מעוניינים לבצע חישוב עם ערך מידע גבוע ביותר.
</p>
<p>מתי יש לעצור את ההירהור ולבצע את הפעולה הבסיסית המועדפת? לכל פעולה חישובית מייחסים עלות הזמן, כלומר הזמן שנדרש כדי לבצע את החישוב, מתוגרם ליחידות המדידה של תועלת הפתרון. במקרים רבים, למשל כשמחפשים פתרון אופטימלי , או להפך, פתרון כלשהו, גם תועלת הפתרון הוא הזמן שנדרש למצוא אותו, ואז עלות הזמן היא פשוט זמן החיושב עצמו.
</p>
<p>
ברוב הבעיות ניתוח עלויות חישוב וערך מידע מוסבך למדי, ומקובל להסתמך על הנחות מפשטות, שחשובות בינהן הן:
<ol>
  <li>
  אי־תלות בין תת־העצים - כלומר, עצם העובדה שהאלגוריתם בחר להתקדם בכיוון פתרון מסוים לא משנה את התועלת של פתרון אחר.</li>
  <li>
  קצרות־ראייה ־ פעולה חישובית נבחרת כאילו זאת הפעולה החישובית האחרונה לפני ביצוע פעולה בסיסית. </li>
  </ol>
  כמובן, כמו כל חנחה מפשטת אחרת, הנחות אלה לא תמיד הולמות את הבעייה, ולפעמים, כפי שנראה בהמשך, אנחנו נדרשים לוותר עליהן ולהחליף אותן באחרות, חלשות או משוכללות יותר. 
 </p>
   <h2>Case Studies</h2>
 <p>
 עכשיו נראה כיצד ניתן להפעיל את השיטה לבעיות שונות מבינה מלאכותית.
 </p>
  <h3>סיפוק אילוצים</h3>
<p>
הסוגיה הראשונה שנתבונן בה היא סידור ערכים באלגוריתם לבעית סיפוק אילוצים. בעית סיפוק אילוצים מוגדרת כאוסף משתנים X, כשלכל משתנה יש מתחם ערכים D בגודל שונה, וקבוצת אילוצים C. פתרון לבעייה ־ השמה כלשהי למשתנים X שמספקת את כל האילוצים. דרך נפוצה לפתור בעיית סיפוק אילוצים בעזרת אלגוריתמם מסוג MAC, חיפוש לעומק תוך שמירה על עיקביות הקשתות ־ arc consistency.
</p>
<p>
זמן הריצה של האלוגיתם תלוי באופן משמעותי בסידור של המשתנים בעץ החיפוש, ובערכים לכל משתנה. באופן אינטויטיבי, אנחנו רוצים לצמצם את עץ החיפוש ככל האפשר, ולכן היוריסטיקות לסידור משתנים (שאינן נושא של המחקר שלנו) נוטות לשים קודם את המשתנים עם מתחם קטן שמשתתפים באילוצים רבים. 
</p>
<p>
בהינתן סדר משתנים מסוים, החיפוש ינסה כל ערך ממתחם (דינמי, אחרי הפעלת arc consistency) וזמן הריצה יהיה תלוי בסדר הערכים. בין היריסטיקות פשוט אפשר להצביע, למשל , על minimum conflicts, minimum impact ואחרות - הרעיון מאוחרי היוריסטיקות לסידור ערכים הוא לשאיר חופש בחירה בערכים ככל שאפשר רחב בתת־העץ הנבחר. יש גם היוריסטיקות אינפורמטיביות יותר וגם יקרות משמעותית, שעשויות לשפר את זמני החיפוש במיוחד במופעים קשים, ביניהן ־ היוריסטיקות שמבוססות על אומדן מספר הפתרונות בתת־העץ: אכן, אם עבור ערך מסוים יש הרבה פתרונותת בתת־העץ, ועבור אחר ־ מעט, עדיף מן הסתם לבחור בערך הראשון. החסרון הוא שהזמן לחשב היוריסטיקה כזאת די משמעותי, ואף על פי שבמקרים מסוימים היא בכל זאת תחסוך את הזמן הכולל, במקרים רבים אחרים ההוצאות על חישוב היוריסטיקה ימחקו את יתרון ממנה: מה טוב באומדן של מספר פתרונות של תת־עץ מסוים אם חיפוש עיוור מביא פתרון בפחות זמן?
</p>
<p>
לכן הגישה האפשרית היא לחשב את היוריסטיקה היקרה באופן סלקטיבי ־ רק עבור ערכים מסוימים: עבור משנתה נתון אנחנו נאמוד את מספר פתרונות עבור כל ערך אחד אחרי השני כל עוד התועלת משיפור בסידור האחרים כתוצאה של החישוב הבא תהיה גבוהה מעלות החישוב. אחרת נקבע סדר שרירותי.</p>
<p>
ניתן להשיג, תוך ניתוח טכני ש ל הזמן הכולל של החיפוש, אומדן לשיפור הכולל של זמן החיפוש כ־(T_1-T_i)|D| בתנאי ש T_1&gt;T_i, T_i הוא אומדן הזמן למציאת פתרון עבור הההשמה ה־i. אבל כדי להעריך את ערך מידע של חישוב היוריסטיקה, אנחנו צריכים לדעת מהי ההתפלגות של התוצאות האפשריות שלה לפני שחישבנו אותה. התפלגות כזאת לא ידוע לנו, ולכאורה מודל סבירה אפשרית תלוייה בהרבה גורמים ומורכבת. 
כאן חוסר הידיעה דווקא בא לעזרה. את מודל האמונה (belief model) שלנו אנחנו נשיג מהאלגוריתם עצמו בעזרת ההנחות הבאות:</p>
<ul>
   <li>הפתרונות מפולגים במרחב החיפוש באופן אחיד, כך שאפר למדל את ההתפלגות בתהליך פואסון.</li>
   <li>מציאת כל הפתרונות עבור כל השמה למשתנה נתון לוקח את אותו הזמן. זוהי הנחה אמיצה, אבל מחקר קודם מראה שבמקרים רבים היא סבירה. </li>
   <li>אנחנו יכולים לאמוד את הזמן למציאת פתרון בודד, במידה וקיים כיחס של הזמן למציאת כל
    הפתרונות למספר הפתרונות. גם זה פישוט משמעותי שמניח אלגוריתם ומבנה עץ מסוים.</li>
 </ul>
 <p>
 תחת הנחות אלו, ועל סמך אומדן מספר התפרונות שקיבלנו בצעד הקודם של האלגוריתם עבור כל ההשמות למשתנה הנוכחי, ניתן כבר לאמוד את זמן מציאת הפתרון הממוצע בהינתן זמן מציאת כל הפתרונות ומספר הפתרונות. עדיין הזמן למציאת כל הפתרונות, כמו גם הזמן לחישוב מספר הפתרונות עבר השמה מסוימת נשאר לא יודע, אבל כאן עוזרות שתי אבחנות נוספות: </p>
 <ul>
   <li>
   אנחנו רוצים רק לדעת האם עבור הערכים שעדיין לא נבחנו ערך המידע הוא חיובי (כלומר חיסכון בזמן גובר על עלות החישוב) ־ ואז בכל פעם נבחר בערך שרירותי.
   </li>
   <li>
  גם זמן חישוב מספר הפתרון המקורב תלוי במספר בזמן מציאת כל הפתרונות באופן שמאפר להעלים את האחרון מהנוסחה ולקבל את התנאי הבא להפעלת היוריסטיקה, שפשוט לחישוב, תלוי בערך בלתי ידוע אחד גמ״א שקל ללמוד אותו, ומאשפר הפעלה סלקטיבית של היוריסטיקה. 
  </li>
  </ul>
  <p>
ניסויים ־ גם על מופעים רנדומיים מסוג RB, גם על מופעים של Sudoku מראים שאף על פי שאפילו השימוש הגורף בהיוריסטיקה משפר את התוצאות, השיפור המירבי מושג כשהיוריסטיקה מופלת בכ־10% אחוזים של המקרים. 
</p>
<p>
לסיכום של הסוגייה הזו ־ פנינו לבעייה כי הייתה לנו היוריסטיקה חכמה ויקרה, ולא ידענו איך להשיג את הbelief state. במקום מודל הידיעה השתמשנו בשרירותיות הבחירה של האלגוריתם וקיבלנו תנאי rational metareasoning שמאשפר הפעלת היוריסטיקה סלקטיבית ויעילה.
</p>

<h3>דגימת מונטה־קרלו בעצים</h3>
<p>
הסוגייה השנייה היא דגימת מונה־קרלו בעצים, Monte-Carlo Tree Search. דגימת מונטה־קרלו היא שיטת חישוב חלופית להיוריסטיקות, במובן מסוים, במקום לנסות להעריך צמב נתון באופן הוליסטי, האלגוריתם מדגים התפתחויות שונות של החיפוש לפי התפלגות בחירות מסוימת. על סמך תוצאות של דגימות רבות האלגוריתם בוחר פעולה בסיסית. אחד העיקרונות של אלגורותמים מבוססים על הדגימה הוא שילוב של ״גילוי וניצול״ - exploration and exploitation. במלים אחרות, מצד אחד, האלגוריתם מעוניין, לכאורה,  לפתח ככל שאפשר טוב את הכיוון המועדף אבל בלי להזניח כיוונים אחרים, שנראים טובים פחות, בהנחה שגם כיוון אחר יכול להתגלות כטוב בהשמך.
</p>
<p>
אולם העיקרון של גילוי\ניצול בא מבעיות עם רווח מצטבר (cumulative reward), שאחד המודלים הנפוצים לבעיות כאלה הוא בעיית הבנדיט מרובה זרועות, בה המטרה היא למקסם את הריח של מספר נתון של משיכות. בגדימה בעצים במצב הנוכחי כלל אין טעם ל״ניצול״ ־ משמעות יש רק לבחירה הסופית בפעולה, הרווח מהדגימות לא מתקבל; לכן מודל טוב לפחות לבחירת כיוון הדגימה בשורש הנוכחי של החיפוש הוא  בעייה של רווח פשוט (simple reward) בבעיית הבנדיט. בהמשך הדגימה אנחנו כן מעוניינים לסמלץ את ההתנהגות הטובה ככל שאפשר של הסוכן, לכן העיקרון של הרווח המצטבר אמור להועיל כקירוב ראשוני. 
</p>
<p>
אי לכך, כדי לדגום בעץ באופן רציונלי, אנחנו צריכים כל פעם לבחור בכיוון הדגימה שממקסם את ערך המידע, כלומר משפיע באופן החזק ביותר על הבחירה של פעולה בסיסית  ־ בעייה קלסית לRational Metareasoning. אולם, כאן אנחנו נתקעים במספר קשיים: בנוסף לקושי שכבר התמודדנו איתו בבעייה הקודמת ־ למעט מקרים מוגבלים לא יודעה לנו ההתפלגות של תוצאות הדגימה, קיים קושי נוסף. ההנחה הפשטת היסודית ־ הנחנה מיופית ־ לא מועילה, כי במקרים רבים דגימה בודדת לא יכולה לשנות באופן תאורטי את הבחירה, ורק תוצאה מצטברות של דגימות רבות עשויה לשאת ערך מידע חיובי. 
</p>
<p>
על שניי הקשיים האלה אנחנו נתגבר בידי כך שנחסום את ערך מידע של דגימות רבות בכיוון אחד בעזרת אי־שוויון ריכוז (ברנשטיין־הפדינג), ובכך נקבל חסם מוחלט (לא בהסתברות) על ערך מידע של דגימה בכיוון אחד בלבד. (נוסחאות כאן) בכל פעם, אנחנו נדגום בכיוון עם החסם העליון על ערך המידע הגבוהה ביותר. בפועל החסם ישרת אותנו כאומדן לערך מידע. באותו האומדן  היינו יכולים להשתמש כדי לקבל גם את תנאי העצריה לו ידענו לתרגם את עלות דגימה בודדת ליחידות של ערך מידע. בדגימת מונטה קרלו ערך מידע במקרים רבים הוא לא הזמן, אלא ערך אחר שנמדד ביחידות מיוחדות לבעייה. אפשר בכל מקרה מיוחד להמציא תרגום מתאים, אבל לגדימת מונטה־קרלו יש הבט חשוב נוסף שנותן לעלות הדגימה משמעות ברורה ודרך טובה להעריך אותה.
</p>
<p>
בניגוד למודל המפושט שלנו, שבכל מצב נתון הדגימה מתחילה מחדש, באלגוריתמים האמיתיים תוצאות הדגימות ־ דרובן עוברות דרך הקודקוד שיבחר בסוף כהקודקוד הבא ־ ממוחזרות, וההשפעה של כל דגימה היא לא רק על הבחירה של פעולה בקודקוד הנוכחי, אלא גם על הבחירות בצאצאים בתנאי שהדגימה עברה דרכם. התעלמות מההשפעה הזו מובילה לשגיאה משמעותית באמידת ערך המידע. יש לפחות שתי דרכים להתמודד עם התופעה: אחת ־ לנסות לפתח מודל משוכלל שיתחשב גם בערך מידע העתידי, אבל זה די מסובך. הדרך השנייה היא ־ לחזור ולנקוט בגישה קצרת־ראייה, לאו כלפי הדגימות בקודקוד אחד אלא לשימוש בדגימה נתונה בעתיד: כל דגימה משפיעה רק על הבחירה בקודקוד הנוכחי, אבל דגימות שלא ניצלנו בקודקוד הנוכחי עוברות לתקציב של הצאצאים. מודל זה מייצג את התופעה של מיחזור דגימות (וגם חוסכת את החלק החתחלתי המיותר של הדגימות של רוב ההשפעה שלהן בעתיד) וגם נותן תוכן לעלות הדגימה ־ שהיא שיפור בערך המידע בעתיד עקב העלת התקציב בדגימה אחת. את העלות עדיין קשה לעריך באופן עיוני, אבל יחסית קל ללמוד ־ שוב יש פרמטר אחד עם משמעות ברורה שניתן ללמוד (לכוון) ממעט ניסויים ואפילו תוך ריצה. 
 </p>
 <p>
 הניסויים עם Patchi - סוכן גו אימתו את הגישה המתוארת להלן: דגימה שמבוססת על ערך מידע ותנאי עצירה ופיזור דגימות נותנת תוצאות טובות יותר מהאלגוריתם שמבוסס על UCT.
 </p>
  <h3>הפעלת היוריסטיקות ב A*</h3>
  <p>
  הסוגייה האחרונה שנסתכל עליי היא הפעלה רציונלית של היוריסטיקות בגירסה של אלגוריתם A* לחיפוש מסלול בגרף, מכונה Lazy A*. בLazy A* יש שתי היוריסטיקות, כשאחת מהן מופעלת לפני הכנסת קודקוד לרשימה הפתוחה וקובעת את הסדר הראשוני בה, והשנייה, גם יקרה וגם חכמה יותר, בהוצאת קודקוד מהרשימה. ההפעלה העצלה של ההיוריסטיקה השנייה שקולה, מצד אחד, לכיוון האלגוריתם על ידי המקסימום של שתי ההיוריסטיקות (שכידוע מהווה היוריסטיקה טובה יותר), מהצד השני חוסכת את זמן החישוב של היוריסטיקה השנייה כשכבר הראשונה גוזמת קודקוד מסוים. האלגוריתם הפשוט הזה הוכיח את עצמו בכמה בעיות כפתרון טוב לשילוב של היוריסטיקות, יעיל וקל לשימוש. 
  </p>
  <p>
בבעייה הקלסית שמתאימה לRational Metareasoning אנחנו מאזנים בין איכות הפתרון הסופי לבין המאמץ שמשקיעים בו. לכאורה, בחיפוש האופטימלי, שבו רק הפתרון הטוב ביותר מתקבל אין מקום ליישום של שיטת Rational Metareasoning, כי לכל פתרון תועלת דו־ערכית בלבד ־ או שהוא אופטימלי, או שהוא לא פתרון. אבל גם אלגוריתמים אופטימליים כוללים בתוכם את האופטימיזציה של זמן החיפוש, אנחנו מעוניינים למצוא את הפתרון האופטימלי בזמן קצר ביותר. וגם במקרה של Lazy A* יתכן שניתן לחשב את היוריסטיקה השנייה פחות ובכל זאת לקבל פתרון בזמן קצר יותר. ואכן כך: אנחנו ננשנה את Lazy A* כך שבכל פעם שהקודקוד יוצא מהרשימה הפתוחה כשרק היוריסטיקה הראשונה חושבה, במקום לחשב את היוריסטיקה השנייה באופן גורף, נקבל את החלטה האם לפתח את הקודקוד מייד או לחשב אותה על סמך ערך המידע של החישוב. 
</p>
<p>
נניח שחישבנו את היוריסטקה h2 במצב נתון. יתנכו שתי אפשרויות ־ או שהיוריסטיקה גזמה את הקודקוד, או שהוא בכל זאת יפותח מאוחר יותר במהלך החיפוח. כמובן, יש טעם לחשב h2 רק במקרה הראשון, ונאמר שבמקרה הזה היוריסטיקה h2 מועילה - אבל כמובן לא ידוע מראש באילו מקרים היא מועילה. נניח (וזה מצב האמונה שלנו) שההסתברות p_h  שהיוריסקה h2 תהיה מועילה במצב נתון ידוע לנו. אזי אנחנו יכולים לנתח כל אחד מארבעת המקרים (מועילה\חישבנו) וקבל את התנאי להפעלה שלה. המקרה היחיד שנדרש ניתוח לא טריביאלי הוא כשהיוריסטיקה מועילה אבל לא חישבנו אותה. נזכיר שאנחנו מנסים לשפר את Lazy A*, לכן ננקוט בגישה המיופית ־ נניח שאחרי ההחלטה הנוכחית האלגוריתם יפעל בדיוק כמו Lazy A*, זאת אומרת יפעיל את h2 תמיד. במקרה קל לחשב הפסד גם במקרה הזה (וגם הוא יהיה החסם העליון על ההפסד בפועל, כי אלגוריתם שלנו יהיה טוב מLazy A*)  ונקבל את תנאי של הפעלת היוריסטיקה השנייה. זמני חישוב היוריסטיקות t1 ו־t2 קל לשערך או למדוד בזמן החיפוש, והפרמטר היחיד הוא p_h - אותו ניתן ללמוד מראש עבור זוג היוריסטיקות נתון או תוכ כדי רציה על כל מופע. 
</p>
<p>
האלגויתם המשוכלל Rational Lazy A* אכן התגלה כאלגוריתם קל למימוש ויעיל בדומיינים שונים. הוא ניצח לא רק A* וLazy A*, אלא גם Selective Max, אלגוריתם מתוחכם שמשתמש בלמידה בייסינית כדי להחליט באיזו משתי היוריסטיקות למהשתמש בכל מצב ומצב.
</p>
  <h2>הארות מטודולוגיות</h2>
  <h2>סיכום</h2>
  </body>
</html>
